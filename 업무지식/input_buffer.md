
# 한글 입력 시 buffer 문제

```
한글 받침을 buffer가 가지고 있는 경우 input창에 재입력했을 때 기존 buffer에 있는 값이 다시 들어가는 것.
```

한글을 입력해본다.

보면 영어는 알파벳을 칠 때 밑줄이 그어지지 않는 한편 한글은 입력하고 있는 글자에 대해 밑줄이 그어지게 된다.

즉, 받침을 쓰는데 밑줄이 그어진 상태에서 나왔다 싶으면 마지막 받침을 buffer에 임시저장 해두는 것.

때문에 받침까지 완료가 되어야만 제대로 출력이 되고, 아닌경우는 받침이 필요없지 않는한 이상한 현상이 벌어진다.

ex) '아아' 라는 문자 전송 후, input = ''으로 입력값을 초기화 해줘도 다음에 'ㅇ'을 입력하면 '앙'이 출력됨.


방법1) input의 focus를 없앴다가 다시 focus를 시켜주는 방법(입력 완료도면 blur 후 다시 focus해줌)

근데 이러면 키보드가 내려갔다가 다시 올라온다.


방법2) 숨겨진 input을 하나 두고 focus를 먼저 줘버리기. 그 뒤에 원래 input을 focus 하면 buffer가 사라지게 된다.


관련 포스팅 : https://ggodong.tistory.com/294

여기서는 결론적으로 다른 input 값에 넣으면 발생하지 않으므로 포커스를 다른 input에 옮겼다가 다시 넣는 식으로 로직을 구성함.

```javascript
// 숨겨진 input focus 직후 원래 input focus
hiddenInputElem.focus();
inputElem.focus();
```

이 문제는 ios 13 이상에서 발생되며 안드로이드는 발생하지 않는다고...(왜죠?)

애플 일해라.


<!-- 2021.12.24 -->