# ES6 문법

대표적인 문법들 정리하기

## 1) [ var / const / let ]

자바스크립트는 타입과 관련 없이 var로 변수 선언이 가능했다. 

es6부터는 const와 let의 사용을 권장하는데, 이를 알기 위해서는 변수의 선언과 할당 과정, 호이스팅, 스코프를 알아야한다.

### 1. 변수

변수란, 값을 저장할 수 있는 메모리 공간이다. 이를 값을 담는 그릇으로 많이 비유하는데, 변수를 선언하면 컴퓨터의 메모리 속 어느 한 구석에 그릇을 놓을 자리를 만드는 것으로 생각하면 좋다.

```javascript
var num;
```

num이라는 그릇을 만들고 자리에 두었지만, 그 안에는 아무것도 담겨있지 않다. 이 경우 undefined가 담겨있다.

```javascript
var num = 3;
```

num이라는 그릇에 3을 담고 자리에 가져다 두었다. 변수 num 선언과 동시에 3을 num에 할당했다고 표현한다.

```javascript
var num1, num2, num3;
var num1 = 3, num4 = 4, num5 = 5;
```


여러개의 변수를 한 번에 선언 및 초기화가 가능하다.

```javascript
 a = 1;
console.log(a);
```

var로 선언되지 않는 변수에 값을 대입하면 오류가 발생하지 않는다. 왜냐면 자바스크립트 엔진이 자동으로 전역변수로 선언하기 때문. 아 경우 변수 유효범위가 다를 수 있고 버그가 생길 수 있어 반드시 선언하고 사용하는 것이 좋다. 따라서 이를 위해 Strict 모드를 활용하면 선언되지 않은 변수를 읽을 때 오류가 발생한다.

Strict 모드는 ES5에서 소개된 것으로 엄격한 오류 검사를 적용한다. 맨처음에 "use strict"이라고 선언할 수 있다. 선언되지 않는 변수에 대한 오류 말고도 엄격한 문법 적용이 여러개가 있다.

![image](https://user-images.githubusercontent.com/75053256/141066897-aba94f4d-0c83-439e-8149-37eef226bded.png)

(출처 : http://tcpschool.com/javascript/js_exception_strict)

```javascript
console.log(b);
```

b는 아예 선언도, 값 할당도 되지 않았다. 전역 변수에조차도 선언이 되지 않은 것. 이 경우 오류메시지가 뜬다.


### 2. 호이스팅(hoisting)

변수를 끌어올리는 것.

원래 프로그램은 작성 순서에 따라 차례대로 실행되지만, 호이스팅은 인터프리터가 변수와 함수의 메모리 공간을 선언하기 전에 미리 할당하는 것을 의미한다.
var로 선언한 변수의 경우 호이스팅 시 undefined로 변수를 초기화한다. 반면 let과 const로 선언한 변수의 경우 호이스팅 시 변수를 초기화하지 않는다.

호이스팅을 설명할 땐 주로 "변수의 선언과 초기화(할당)를 분리한 후, 선언만 코드의 최상단으로 옮기는" 것으로 말하곤 한다. 따라서 변수를 정의하는 코드보다 사용하는 코드가 앞서 등장할 수 있다. 다만 선언과 초기화(할당)를 함께 수행하는 경우, 선언 코드까지 실행해야 변수가 초기화된 상태가 됨을 주의해야 한다. 선언과 초기화가 함께 되면 var a와 a=1을 쪼개서 var a 부분을 위로 끌어올리는 것. 거기까지는 undefined가 되고, a=1이 된 순간부터 값이 들어가서 객체가 된다. 선언한 부분만 위로 올리는 것.

호이스팅은 다른 언어에는 없는 자바스크립트만의 고유한 특징이다. 하지만 쉬운 코드 작성을 위해 시작부에 변수를 선언해주는 것이 좋다.

### 3. 스코프(scope)

식별자(ex. 변수명, 함수명, 클래스명 등)의 유효범위를 뜻하며, 선언된 위치에 따라 유효 범위가 달라진다. 전역에 선언된 변수는 전역 스코프를, 지역에 선언된 변수는 지역 스코프를 갖는다.

전역 변수는 어디에서든지 참조가 가능한 값이다. 반면, 지역 변수는 함수 몸체 내부를 말한다. 따라서 지역 변수는 자신의 지역 스코프와 그 하위 지역 스코프에서 유효하다.

한 가지 주의해야 할 점은, 자바스크립트에서 모든 코드 블록(if, for, while, try/catch 등)이 지역 스코프를 만들며, 이러한 특성을 블록 레벨 스코프라 한다. 하지만 var 키워드로 선언된 변수는 오로지 함수의 코드 블록만을 지역 스코프로 인정한다. 이를 함수 레벨 스코프라 한다.

코드가 짧아서 어디에서 문제가 일어난지 바로 알 수 있으면 다행이지만, 실무에서는 그렇지 않다. 전역 변수로 인해 재할당이 발생하거나, 전역 스코프를 공유하기 때문에 어딘가에 동일한 이름이 있다면 예상치 못한 결과를 가져올 수 있는 위험이 있다.(에러도 안뜬다.) 따라서 오로지 함수 코드 블록만을 지역 스코프로 인정하는 var 대신, 블록 레벨 스코프를 지원하는 const와 let을 사용하는 것을 권장한다.


### 4. 결론

기본적으로 변수의 스코프는 최대한 좁게 만드는 것을 권장한다. 따라서, var 키워드 보다는 let과 const 키워드를 사용하며, 변경하지 않는 값(상수)이라면 let 보다는 const 키워드를 사용하는 것이 안전하다.


## 2) Arrow functions(화살표 함수)

혁신적이다. 코드를 좀 더 직관적으로 읽을 수 있게 만들어준 최신 코드.

재사용하지 않는 anonymous function의 경우, 화살표함수를 사용해 return과 중괄호{}를 생략할 수 있다.

es5에서는 이처럼 함수를 사용했다면
```javascript
const sum = function(x, y) { 
  return x + y; 
} 

sum(3, 4); //7
```

es6에서 화살표 함수를 사용하면 이처럼 쓸 수 있다.
```javascript
const sum = (x, y) => x + y;

sum(3, 4); //7
```

쉽게 말해 return 없이 함수 실행을 종료시키고 값을 반환할 수 있는 것.

단, 화살표 함수 표현(arrow function expression)은 function 표현에 비해 구문이 짧고 자신의 this, arguments, super 또는 new.target을 바인딩 하지 않는다. 화살표 함수는 항상 익명이다. 이 함수 표현은 메소드 함수가 아닌 곳에 가장 적합하다. 그래서 생성자로서 사용할 수 없다.

화살표 함수는 항상 보는 함수라 익숙하기는 하지만 사용 방법은 제대로 익혀야 할 것 같다.

<!-- 2021.11.10~ -->