
# SSL


### 웹사이트 보안을 위한 방법, SSL
<br>

대부분의 사람들이 브라우저 검색창에 원하는 사이트 주소와 도메인을 입력하여 인터넷에 접속합니다. 예전에는 URI가 http로 시작하는 사이트가 전부였지만, 요즘 공신력 있는 사이트 대부분은 ‘https’로 시작합니다. 이렇게 https를 통한 인터넷 접속은, 브라우저를 실행 중인 우리 컴퓨터(또는 휴대폰)가 해당 사이트의 서버와 암호화 통신을 하고 있다는 것을 의미합니다. 잘 모르는 사이에, 우리는 이미 모두 경험해본 것이죠. 이렇게 https를 이용한 인터넷 접속은 SSL(TLS)을 이용한 것이라고 보면 됩니다. 즉, SSL 암호화 통신은 'SSL(Secure Socket Layer)' 또는 'TLS(Transport Layer Security)'라는 보안 프로토콜을 통해 클라이언트(브라우저)와 서버(웹서버)가 보안이 향상된 통신을 하는 것을 말합니다. 이어서 SSL과 HTTPS의 차이를 알려 드리겠습니다. 

​

“그럼 SSL 또는 HTTPS는 왜 사용하는 건가요?”

HTTP 뒤에 붙는 S는 보안(Secure)을 나타냅니다. 이는 취약점 보완으로 보안이 향상된 웹 통신을 하기 위함이 가장 큰 목적인데요. 예시를 통해 천천히 알아봅시다.

​


여기 캠핑용품 제조 브랜드 창업을 시작한 A사장님이 있습니다. A사장님은 제품 제조 후 거래 업체에 제품을 배송해야 합니다. 이때, 운송수단으로 트럭을 사용하기 시작합니다.

​

​


크게 성장한 A사장님의 기업에서는 이제 신제품도 출시하게 됩니다. 출시 전 업체들에게 신제품의 샘플 본도 같이 배송하게 되죠.

​

​


하지만 얼마 후, 출시를 앞둔 신제품의 디자인을 도용 당하고, 경쟁사인 X사에서 관련 제품을 먼저 출시하게 됩니다. 큰 타격을 입은 A사장님은 앞으로 영업 비밀 유출 방지를 위해 거래 업체 간 확실한 신뢰가 필요하다고 생각합니다.

​

​


A사장님은 도난 방지를 위해 운송수단을 밴형 트럭으로 바꿉니다. 그리고 A사장님과 거래 업체만 여닫을 수 있는 자물쇠를 걸고 서로 같은 종류의 키를 교환합니다. 이제 A사장님은 다른 업체들과 안정적으로 제품 배송을 할 수 있게 되었습니다.

​

​


위 A사장님의 이야기를 웹 통신 환경에 대입해 볼 수 있습니다. 인터넷 통신의 주체는 클라이언트(Client)와 서버(Server)입니다. A사장님과 B사장님이 각각에 해당하죠. 그리고 두 사장님이 거래하는 물품은 데이터이며, 운송 수단인 트럭은 인터넷 공간에서 주고받는 통신 프로토콜인 HTTP입니다. 신제품 디자인을 가로챈 경쟁사 X사장님은 네트워크상의 패킷을 도청하는 스니퍼(Sniffer)가 될 수 있습니다. A사장님이 영업 비밀 유출 방지로 고안해낸 밴형 트럭은 HTTPS 프로토콜로 보면 됩니다.

​

​

“그럼 HTTPS와 SSL은 같은 것인가요? 그리고 SSL과 TLS는 어떻게 다른가요?”


우선, HTTPS와 SSL은 다릅니다. SSL과 TLS는 '보안 계층'이라는 독립적인 프로토콜 계층을 만들어, 위 그림과 같이 응용 계층과 전송 계층 사이에 속하게 됩니다. HTTPS는 SSL 또는 TLS 위에 HTTP 프로토콜을 얹어 보안된 HTTP 통신을 하는 프로토콜입니다. 즉, SSL과 TLS는 HTTP뿐만이 아니라 FTP, SMTP와 같이 다른 프로토콜에도 적용할 수 있으며, HTTPS는 TLS와 HTTP가 조합된 프로토콜만을 가리키는 겁니다. SSL과 TLS는 같은 의미의 단어입니다. TLS가 SSL의 후속 버전이지만, SSL이 일반적으로 더 많이 사용되는 용어입니다.

​

​

“이제 SSL 암호화 통신에 대해 어느 정도 이해가 갑니다. 그럼 어떤 식으로 보안이 적용되는 건가요?”

SSL 암호화 통신은 여러 가지 조건과 과정을 통해 설립됩니다. 앞에서 언급한 이야기는 아주 간단한 예시입니다. 먼저, 통신 과정들을 알아보겠습니다. SSL 암호화 통신은 총 세 단계로 나눌 수 있습니다.

​


첫 번째로, SSL 핸드셰이크를 수행합니다. 이때 데이터를 주고받기 위해 어떤 방법을 사용해야 하는지 서로의 상태를 파악합니다. SSL은 80번 포트를 사용하는 http와 달리 443번 포트를 기본으로 사용하는 TCP 기반의 프로토콜입니다. TCP 기반이기 때문에 SSL 핸드셰이크 전에 TCP 3-way 핸드셰이크 또한 수행합니다. 서로 간 협상이 완료되면, SSL 세션이 생성되고 클라이언트와 서버는 원하는 데이터를 주고받게 됩니다. 그리고 데이터 전송의 끝을 서로에게 알리며 세션을 종료합니다.

​

​

핸드셰이크 단계에선 서로 어떤 것들을 협상하게 되나요?

​


서로 간의 메시지와 데이터 통신은 사람과 사람이 대화하는 것과 유사합니다. TCP 통신의 바탕인 '신뢰성'을 생각하면 더욱 쉽게 이해할 수 있을 겁니다. 

​

- Client hello : 클라이언트가 서버에게 연락합니다. 브라우저 검색창에 도메인을 입력하는 것으로 보면 됩니다. 이때 클라이언트는 자신의 브라우저가 지원할 수 있는 암호화 방식(Cipher Suite)을 먼저 제시합니다. 그리고 랜덤 데이터를 생성하여 추가로 전송합니다.

- Server hello : 서버가 클라이언트에게 연락합니다. 서버는 클라이언트가 제시한 암호화 방식 중 하나를 선정하여 알려줍니다. 또한, 서버 자신의 인증서를 전달합니다. 이 인증서에는 서버의 공개 키가 포함되어 있습니다. 클라이언트와 마찬가지로 서버 측에서 생성한 랜덤 데이터 또한 전달합니다.

- Client key exchange : 클라이언트는 미리 주고받은 자신과 서버의 랜덤 데이터를 참고하여 서버와 암호화 통신을 할 때 사용할 키를 생성한 후 서버에게 전달합니다. 이때 키는 서버로부터 받은 공개키로 암호화되어 보내집니다.

- Finished : 마지막으로 핸드셰이크 과정이 정상적으로 마무리되면, 클라이언트와 서버 모두 “finished” 메시지를 보냅니다. 그 후부턴 클라이언트가 생성한 키를 이용하여 암호화된 데이터를 주고받게 됩니다.



출처 : https://m.blog.naver.com/skinfosec2000/222135874222
<!-- 2021.10.15 -->